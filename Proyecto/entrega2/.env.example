# Environment Variables for SodAI Drinks Prediction Pipeline
# ============================================================
# Copy this file to .env and customize the values as needed
# Usage: cp .env.example .env

# =============================================================================
# AIRFLOW CONFIGURATION
# =============================================================================

# Database Connection (PostgreSQL)
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow
POSTGRES_DB=airflow

# Airflow Webserver
AIRFLOW__WEBSERVER__SECRET_KEY=change_this_to_a_random_secret_key_in_production

# Airflow Admin User (created on first run)
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=admin

# Airflow Fernet Key (for encryption)
# Generate a new one with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
AIRFLOW__CORE__FERNET_KEY=ZmDfcTF7_60GrrY167zsiPd67pEvs0aGOv2oasOM1Pg=

# =============================================================================
# MLFLOW CONFIGURATION
# =============================================================================

# MLflow Tracking URI
MLFLOW_TRACKING_URI=http://mlflow:5000

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# Number of Optuna trials for hyperparameter optimization
N_OPTUNA_TRIALS=50

# Drift detection threshold (proportion of features with drift to trigger retrain)
DRIFT_THRESHOLD=0.3

# MLflow Experiment Name
MLFLOW_EXPERIMENT_NAME=sodai_drinks_prediction

# Training data sampling (reduce to save memory)
# 0.2 = 20% of training data, 1.0 = 100% (use all data)
TRAIN_SAMPLE_FRAC=0.2

# Validation data sampling (reduce to save memory)
# 0.3 = 30% of validation data, 1.0 = 100% (use all data)
VAL_SAMPLE_FRAC=0.3

# Number of samples for SHAP analysis (reduce to save memory)
# Lower = faster but less representative, recommended: 500-1000
SHAP_SAMPLE_SIZE=1000

# =============================================================================
# DATA PATHS (inside container)
# =============================================================================

AIRFLOW_HOME=/opt/airflow
DATA_DIR=/opt/airflow/data
RAW_DATA_DIR=/opt/airflow/data/raw
PROCESSED_DATA_DIR=/opt/airflow/data/processed
MLRUNS_DIR=/opt/airflow/mlruns
MODELS_DIR=/opt/airflow/models
PREDICTIONS_DIR=/opt/airflow/predictions
DRIFT_REPORTS_DIR=/opt/airflow/drift_reports

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker Compose Project Name
COMPOSE_PROJECT_NAME=sodai

# =============================================================================
# NOTES
# =============================================================================
# - Change SECRET_KEY and FERNET_KEY in production
# - Use strong passwords for admin user
# - Adjust N_OPTUNA_TRIALS based on available compute (lower = faster, higher = better model)
# - DRIFT_THRESHOLD: 0.3 means 30% of features must show drift to trigger retrain
